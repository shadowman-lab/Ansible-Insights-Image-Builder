---
packages:
  - ipa-client
  - yum-utils
  - firewalld

filesystems:
  - mountpoint: /dev
    min_size: 1856128
  - mountpoint: /dev/shm
    min_size: 1876572
  - mountpoint: /run
    min_size: 1876572
  - mountpoint: /sys/fs/cgroup
    min_size: 1876572
  - mountpoint: /
    min_size: 46589720
  - mountpoint: /boot
    min_size: 1038336
  - mountpoint: /boot/efi
    min_size: 613184


# The actual images definition
images:
  - name: rhel-9-shadowman
    compose:
      distribution: rhel-9
      image_description: rhel9_64Guest
      image_type: vsphere-ova
      customizations:
        packages: "{{ packages }}"
        filesystem: "{{ filesystems }}"
        users:
          - name: "{{ username | default(omit) }}"
            password: "{{ userpassword | default(omit) }}"
            ssh_key: "{{ ssh_key | default(omit) }}"
        firewall:
          services:
            enabled:
              - ssh
        services:
          enabled:
            - firewalld

  - name: rhel-8-shadowman
    compose:
      distribution: rhel-8
      image_description: rhel8_64Guest
      image_type: vsphere-ova
      customizations:
        packages: "{{ packages }}"
        filesystem: "{{ filesystems }}"
        users:
          - name: "{{ username | default(omit) }}"
            password: "{{ userpassword | default(omit) }}"
            ssh_key: "{{ ssh_key | default(omit) }}"
        firewall:
          services:
            enabled:
              - ssh
        services:
          enabled:
            - firewalld
